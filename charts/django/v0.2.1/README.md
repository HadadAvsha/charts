# django

![Version: 0.2.1](https://img.shields.io/badge/Version-0.2.1-informational?style=flat-square) ![AppVersion: 3.1](https://img.shields.io/badge/AppVersion-3.1-informational?style=flat-square)

Generic chart for basic Django-based web app

**Homepage:** <https://www.djangoproject.com/>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| Rizky Maulana Nugraha | rizky@kartoza.com |  |

## Source Code

* <https://github.com/django/django>

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| file://../../common/v1.0.0 | common | 1.0.0 |
| file://../../postgis/v0.2.1 | postgis | 0.2.1 |

# Long Description

This is Kartoza's base chart for Django app

This helm chart was intended to be the base chart for any Django-based deployment.
The customization are provided via values.yml and pod environment.

# How to Use

For helm:

```bash
helm install release-name kartoza/django
```

# Intro

This chart bootstrap a Django web framework.
Django is a web framework based on python programming language.
It is a general purpose web framework. This helm chart is created as a base chart
for you. It is supposed to be overrideable for you to provide your own Django image/app.

Django can be deployed as a standalone web app. In this chart, we deployed Django coupled with
Nginx webserver with WSGI protocol and Postgis database backend.

# What it can do

The default deployment install generic Django image coupled with Nginx webserver and Postgis RDBMS backend.

Optional customizations:

- Enable/Disable Postgis RDBMS
- Override entrypoint script of Django
- Override python module requirements
- Override Nginx config (if you want to use different staticfiles mapping or protocols)
- Add extra configuration file
- Add custom settings.py
- Add custom urls.py
- Override DJANGO_SETTINGS_MODULE
- Toggle Debug mode

# Parameters

| Parameter | Description |
|---|---|
| image.registry | Docker image registry |
| image.repository | Docker image repository |
| image.tag | Docker image tag |
| image.pullPolicy | Docker image pull policy |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| extraConfigMap | string | `""` | (tpl/dict) Define this for extra config map to be included in django-shared-config |
| extraPodEnv | string | `"- name: DJANGO_SETTINGS_MODULE\n  value: \"django.settings\"\n- name: DEBUG\n  value: {{ .Values.global.debug | quote }}\n- name: ROOT_URLCONF\n  value: {{ .Values.global.rootURLConf | quote }}\n- name: MAIN_APP_NAME\n  value: {{ .Values.global.mainAppName | quote }}\n"` | (tpl/array) Define this for extra Django environment variables |
| extraPodSpec | string | `""` | (tpl/object) This will be evaluated as pod spec |
| extraSecret | string | `""` | (tpl/dict) This Define this for extra secrets to be included in django-shared-secret secret |
| extraVolume | string | `""` | (tpl/array) Define this for extra volume (in pair with extraVolumeMounts) |
| extraVolumeMounts | string | `""` | (tpl/array) Define this for extra volume mounts in the pod |
| global | object | `{"adminEmail":"admin@localhost","adminPassword":{"value":null,"valueFrom":{"secretKeyRef":{"key":"admin-password","name":null}}},"adminUser":"admin","databaseHost":"postgis","databaseName":"django","databasePassword":{"value":null,"valueFrom":{"secretKeyRef":{"key":"database-password","name":null}}},"databasePort":5432,"databaseUsername":"django_db_user","debug":"False","djangoArgs":"[\"uwsgi\",\"--chdir=${REPO_ROOT}\",\"--module=${MAIN_APP_NAME}.wsgi\",\"--socket=:8000\",\"--http=0.0.0.0:8080\",\"--processes=5\",\"--buffer-size=8192\"]\n","djangoCommand":"[\"/opt/django/scripts/docker-entrypoint.sh\"]\n","djangoSecretKey":{"value":null,"valueFrom":{"secretKeyRef":{"key":"django-secret","name":null}}},"djangoSettingsModule":"django.settings","existingSecret":"","mainAppName":"django","mediaRoot":"/opt/django/media","nameOverride":"django","rootURLConf":"django.urls","sharedSecretName":"django-shared-secret","siteName":"django","staticRoot":"/opt/django/static"}` | This key name is used for service interconnection between subcharts and parent charts. |
| global.adminEmail | string | `"admin@localhost"` | (string) Default admin email sender |
| global.adminPassword.value | string | `nil` | Specify this password value. If not, it will be autogenerated everytime chart upgraded |
| global.adminUser | string | `"admin"` | (string) Default super user admin username |
| global.databaseHost | string | `"postgis"` | (string) Django database host location. By default this chart can generate standard postgres chart. So you can leave it as default. If you use external backend,  you must provide the value |
| global.databaseName | string | `"django"` | (string) Django database name |
| global.databasePassword.value | string | `nil` | Specify this password value. If not, it will be autogenerated everytime chart upgraded. If you use external backend, you must provide the value |
| global.databasePort | int | `5432` | (int) Django database port. By default this chart can generate standard postgres chart. So you can leave it as default. If you use external backend,  you must provide the value |
| global.databaseUsername | string | `"django_db_user"` | (string) Database username backend to connect to. If you use external backend, provide the value |
| global.debug | string | `"False"` | (string) Python boolean literal, this will correspond to `DEBUG` environment variable inside the Django container. Useful as a debug switch. |
| global.djangoArgs | string | `"[\"uwsgi\",\"--chdir=${REPO_ROOT}\",\"--module=${MAIN_APP_NAME}.wsgi\",\"--socket=:8000\",\"--http=0.0.0.0:8080\",\"--processes=5\",\"--buffer-size=8192\"]\n"` | (tpl/array) The django command args to be passed to entrypoint command |
| global.djangoCommand | string | `"[\"/opt/django/scripts/docker-entrypoint.sh\"]\n"` | (tpl/array) The django entrypoint command to execute |
| global.djangoSecretKey.value | string | `nil` | Specify this Django Secret string value. If not, it will be autogenerated everytime chart upgraded |
| global.djangoSettingsModule | string | `"django.settings"` | (string) Django settings module to be used |
| global.existingSecret | string | `""` | (tpl/string) Name of existing secret |
| global.mainAppName | string | `"django"` | (string) The main app name to execute. Affects which settings, wsgi, and rootURL to use. |
| global.mediaRoot | string | `"/opt/django/media"` | (path) Location to the media directory |
| global.rootURLConf | string | `"django.urls"` | (string) Django root URL conf to be used |
| global.sharedSecretName | string | `"django-shared-secret"` | (string) Name of shared secret store that will be generated |
| global.staticRoot | string | `"/opt/django/static"` | (path) Location to the static directory |
| image.pullPolicy | string | `"IfNotPresent"` | Image pullPolicy |
| image.registry | string | `"docker.io"` | Image registry |
| image.repository | string | `"lucernae/django-sample"` | Image repository |
| image.tag | string | `"3.1"` | Image tag |
| ingress.annotations | object | `{}` | (dict) Custom Ingress annotations |
| ingress.enabled | bool | `false` | (bool) Set to true to generate Ingress resource |
| ingress.host | string | `""` | (tpl/string) Set custom host name. (DNS name convention) |
| ingress.labels | object | `{}` | (dict) Custom Ingress labels |
| ingress.tls.enabled | bool | `false` | (bool) Set to true to enable HTTPS |
| ingress.tls.secretName | string | `"django-tls"` | (string) You must provide a secret name where the TLS cert is stored |
| persistence.mediaDir.accessModes[0] | string | `"ReadWriteOnce"` |  |
| persistence.mediaDir.annotations | object | `{}` |  |
| persistence.mediaDir.enabled | bool | `true` | (bool) Allow persistence |
| persistence.mediaDir.existingClaim | bool | `false` |  |
| persistence.mediaDir.mountPath | string | `"/opt/django/media"` |  |
| persistence.mediaDir.size | string | `"8Gi"` |  |
| persistence.mediaDir.subPath | string | `"media"` |  |
| persistence.staticDir.accessModes[0] | string | `"ReadWriteOnce"` |  |
| persistence.staticDir.annotations | object | `{}` |  |
| persistence.staticDir.enabled | bool | `true` | (bool) Allow persistence |
| persistence.staticDir.existingClaim | bool | `false` |  |
| persistence.staticDir.mountPath | string | `"/opt/django/static"` |  |
| persistence.staticDir.size | string | `"8Gi"` |  |
| persistence.staticDir.subPath | string | `"static"` |  |
| postgis.enabled | bool | `true` | (bool) Enable postgis as database backend by default. Set to false if using different external backend. |
| postgis.existingSecret | string | `"{{ include \"common.sharedSecretName\" . | quote -}}\n"` | (tpl/string) Existing secret to be used |
| probe | string | `""` | (tpl/object) Probe can be overridden |
| service.annotations | object | `{}` | (dict) Extra service annotations |
| service.clusterIP | string | `""` | (string) Specify `None` for headless service. Otherwise, leave them be. |
| service.externalIPs | string | `""` | (tpl/array) Specify for LoadBalancer service type |
| service.nodePort | int | `nil` | Specify node port, for NodePort service type |
| service.port | int | `80` | (int) Specify service port |
| service.type | string | `"ClusterIP"` | (string) Define k8s service for Django. |

