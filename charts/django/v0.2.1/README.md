# django

![Version: 0.2.1](https://img.shields.io/badge/Version-0.2.1-informational?style=flat-square) ![AppVersion: 3.1](https://img.shields.io/badge/AppVersion-3.1-informational?style=flat-square)

Generic chart for basic Django-based web app

**Homepage:** <https://www.djangoproject.com/>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| Rizky Maulana Nugraha | rizky@kartoza.com,lana.pcfre@gmail.com |  |

## Source Code

* <https://github.com/django/django>

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| file://../../common/v1.0.0 | common | 1.0.0 |
| file://../../postgis/v0.2.1 | postgis | 0.2.1 |

# Long Description

This is Kartoza's base chart for Django app

This helm chart was intended to be the base chart for any Django-based deployment.
The customization are provided via values.yml and pod environment.

# How to Use

For helm:

```bash
helm install release-name kartoza/django
```

# Intro

This chart bootstrap a Django web framework.
Django is a web framework based on python programming language.
It is a general purpose web framework. This helm chart is created as a base chart
for you. It is supposed to be overrideable for you to provide your own Django image/app.

Django can be deployed as a standalone web app. In this chart, we deployed Django coupled with
Nginx webserver with WSGI protocol and Postgis database backend.

# What it can do

The default deployment install generic Django image coupled with Nginx webserver and Postgis RDBMS backend.

Optional customizations:

- Enable/Disable Postgis RDBMS
- Override entrypoint script of Django
- Override python module requirements
- Override Nginx config (if you want to use different staticfiles mapping or protocols)
- Add extra configuration file
- Add custom settings.py
- Add custom urls.py
- Override DJANGO_SETTINGS_MODULE
- Toggle Debug mode

# Parameters

| Parameter | Description |
|---|---|
| image.registry | Docker image registry |
| image.repository | Docker image repository |
| image.tag | Docker image tag |
| image.pullPolicy | Docker image pull policy |

## Values

<table height="400px">
	<thead>
		<th>Key</th>
		<th>Type</th>
		<th>Default</th>
		<th>Description</th>
	</thead>
	<tbody>
		<tr>
			<td>extraConfigMap</td>
			<td>tpl/dict</td>
			<td><pre lang="tpl">

extraConfigMap: |

</pre>
</td>
			<td>Define this for extra config map to be included in django-shared-config</td>
		</tr>
		<tr>
			<td>extraPodEnv</td>
			<td>tpl/array</td>
			<td><pre lang="tpl">

extraPodEnv: |
- name: DJANGO_SETTINGS_MODULE
  value: "django.settings"
- name: DEBUG
  value: {{ .Values.global.debug | quote }}
- name: ROOT_URLCONF
  value: {{ .Values.global.rootURLConf | quote }}
- name: MAIN_APP_NAME
  value: {{ .Values.global.mainAppName | quote }}

</pre>
</td>
			<td>Define this for extra Django environment variables</td>
		</tr>
		<tr>
			<td>extraPodSpec</td>
			<td>tpl/object</td>
			<td><pre lang="tpl">

extraPodSpec: |

</pre>
</td>
			<td>This will be evaluated as pod spec</td>
		</tr>
		<tr>
			<td>extraSecret</td>
			<td>tpl/dict</td>
			<td><pre lang="tpl">

extraSecret: |

</pre>
</td>
			<td>Define this for extra secrets to be included in django-shared-secret secret</td>
		</tr>
		<tr>
			<td>extraVolume</td>
			<td>tpl/array</td>
			<td><pre lang="tpl">

extraVolume: |

</pre>
</td>
			<td>Define this for extra volume (in pair with extraVolumeMounts)</td>
		</tr>
		<tr>
			<td>extraVolumeMounts</td>
			<td>tpl/array</td>
			<td><pre lang="tpl">

extraVolumeMounts: |

</pre>
</td>
			<td>Define this for extra volume mounts in the pod</td>
		</tr>
		<tr>
			<td>global.adminEmail</td>
			<td>string</td>
			<td><pre lang="json">
"admin@localhost"
</pre>
</td>
			<td>Default admin email sender</td>
		</tr>
		<tr>
			<td>global.adminPassword.value</td>
			<td>string</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td>Specify this password value. If not, it will be autogenerated everytime chart upgraded</td>
		</tr>
		<tr>
			<td>global.adminPassword.valueFrom.secretKeyRef.key</td>
			<td>string</td>
			<td><pre lang="json">
"admin-password"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.adminPassword.valueFrom.secretKeyRef.name</td>
			<td>string</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.adminUser</td>
			<td>string</td>
			<td><pre lang="json">
"admin"
</pre>
</td>
			<td>Default super user admin username</td>
		</tr>
		<tr>
			<td>global.databaseHost</td>
			<td>string</td>
			<td><pre lang="json">
"postgis"
</pre>
</td>
			<td>Django database host location. By default this chart can generate standard postgres chart. So you can leave it as default. If you use external backend,  you must provide the value</td>
		</tr>
		<tr>
			<td>global.databaseName</td>
			<td>string</td>
			<td><pre lang="json">
"django"
</pre>
</td>
			<td>Django database name</td>
		</tr>
		<tr>
			<td>global.databasePassword.value</td>
			<td>string</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td>Specify this password value. If not, it will be autogenerated everytime chart upgraded. If you use external backend, you must provide the value</td>
		</tr>
		<tr>
			<td>global.databasePassword.valueFrom.secretKeyRef.key</td>
			<td>string</td>
			<td><pre lang="json">
"database-password"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.databasePassword.valueFrom.secretKeyRef.name</td>
			<td>string</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.databasePort</td>
			<td>int</td>
			<td><pre lang="json">
5432
</pre>
</td>
			<td>Django database port. By default this chart can generate standard postgres chart. So you can leave it as default. If you use external backend,  you must provide the value</td>
		</tr>
		<tr>
			<td>global.databaseUsername</td>
			<td>string</td>
			<td><pre lang="json">
"django_db_user"
</pre>
</td>
			<td>Database username backend to connect to. If you use external backend, provide the value</td>
		</tr>
		<tr>
			<td>global.debug</td>
			<td>string</td>
			<td><pre lang="json">
"False"
</pre>
</td>
			<td>Python boolean literal, this will correspond to `DEBUG` environment variable inside the Django container. Useful as a debug switch.</td>
		</tr>
		<tr>
			<td>global.djangoArgs</td>
			<td>tpl/array</td>
			<td><pre lang="tpl">

global.djangoArgs: |
["uwsgi","--chdir=${REPO_ROOT}","--module=${MAIN_APP_NAME}.wsgi","--socket=:8000","--http=0.0.0.0:8080","--processes=5","--buffer-size=8192"]

</pre>
</td>
			<td>The django command args to be passed to entrypoint command</td>
		</tr>
		<tr>
			<td>global.djangoCommand</td>
			<td>tpl/array</td>
			<td><pre lang="tpl">

global.djangoCommand: |
["/opt/django/scripts/docker-entrypoint.sh"]

</pre>
</td>
			<td>The django entrypoint command to execute</td>
		</tr>
		<tr>
			<td>global.djangoSecretKey.value</td>
			<td>string</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td>Specify this Django Secret string value. If not, it will be autogenerated everytime chart upgraded</td>
		</tr>
		<tr>
			<td>global.djangoSecretKey.valueFrom.secretKeyRef.key</td>
			<td>string</td>
			<td><pre lang="json">
"django-secret"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.djangoSecretKey.valueFrom.secretKeyRef.name</td>
			<td>string</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.djangoSettingsModule</td>
			<td>string</td>
			<td><pre lang="json">
"django.settings"
</pre>
</td>
			<td>Django settings module to be used</td>
		</tr>
		<tr>
			<td>global.existingSecret</td>
			<td>tpl/string</td>
			<td><pre lang="tpl">

global.existingSecret: |

</pre>
</td>
			<td>Name of existing secret</td>
		</tr>
		<tr>
			<td>global.mainAppName</td>
			<td>string</td>
			<td><pre lang="json">
"django"
</pre>
</td>
			<td>The main app name to execute. Affects which settings, wsgi, and rootURL to use.</td>
		</tr>
		<tr>
			<td>global.mediaRoot</td>
			<td>path</td>
			<td><pre lang="json">
"/opt/django/media"
</pre>
</td>
			<td>Location to the media directory</td>
		</tr>
		<tr>
			<td>global.nameOverride</td>
			<td>string</td>
			<td><pre lang="json">
"django"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.rootURLConf</td>
			<td>string</td>
			<td><pre lang="json">
"django.urls"
</pre>
</td>
			<td>Django root URL conf to be used</td>
		</tr>
		<tr>
			<td>global.sharedSecretName</td>
			<td>string</td>
			<td><pre lang="json">
"django-shared-secret"
</pre>
</td>
			<td>Name of shared secret store that will be generated</td>
		</tr>
		<tr>
			<td>global.siteName</td>
			<td>string</td>
			<td><pre lang="json">
"django"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>global.staticRoot</td>
			<td>path</td>
			<td><pre lang="json">
"/opt/django/static"
</pre>
</td>
			<td>Location to the static directory</td>
		</tr>
		<tr>
			<td>image.pullPolicy</td>
			<td>string</td>
			<td><pre lang="json">
"IfNotPresent"
</pre>
</td>
			<td>Image pullPolicy</td>
		</tr>
		<tr>
			<td>image.registry</td>
			<td>string</td>
			<td><pre lang="json">
"docker.io"
</pre>
</td>
			<td>Image registry</td>
		</tr>
		<tr>
			<td>image.repository</td>
			<td>string</td>
			<td><pre lang="json">
"lucernae/django-sample"
</pre>
</td>
			<td>Image repository</td>
		</tr>
		<tr>
			<td>image.tag</td>
			<td>string</td>
			<td><pre lang="json">
"3.1"
</pre>
</td>
			<td>Image tag</td>
		</tr>
		<tr>
			<td>ingress.annotations</td>
			<td>dict</td>
			<td><pre lang="json">
{}
</pre>
</td>
			<td>Custom Ingress annotations</td>
		</tr>
		<tr>
			<td>ingress.enabled</td>
			<td>bool</td>
			<td><pre lang="json">
false
</pre>
</td>
			<td>Set to true to generate Ingress resource</td>
		</tr>
		<tr>
			<td>ingress.host</td>
			<td>tpl/string</td>
			<td><pre lang="tpl">

ingress.host: |

</pre>
</td>
			<td>Set custom host name. (DNS name convention)</td>
		</tr>
		<tr>
			<td>ingress.labels</td>
			<td>dict</td>
			<td><pre lang="json">
{}
</pre>
</td>
			<td>Custom Ingress labels</td>
		</tr>
		<tr>
			<td>ingress.tls.enabled</td>
			<td>bool</td>
			<td><pre lang="json">
false
</pre>
</td>
			<td>Set to true to enable HTTPS</td>
		</tr>
		<tr>
			<td>ingress.tls.secretName</td>
			<td>string</td>
			<td><pre lang="json">
"django-tls"
</pre>
</td>
			<td>You must provide a secret name where the TLS cert is stored</td>
		</tr>
		<tr>
			<td>persistence.mediaDir.accessModes[0]</td>
			<td>string</td>
			<td><pre lang="json">
"ReadWriteOnce"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.mediaDir.annotations</td>
			<td>object</td>
			<td><pre lang="json">
{}
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.mediaDir.enabled</td>
			<td>bool</td>
			<td><pre lang="json">
true
</pre>
</td>
			<td>Allow persistence</td>
		</tr>
		<tr>
			<td>persistence.mediaDir.existingClaim</td>
			<td>bool</td>
			<td><pre lang="json">
false
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.mediaDir.mountPath</td>
			<td>string</td>
			<td><pre lang="json">
"/opt/django/media"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.mediaDir.size</td>
			<td>string</td>
			<td><pre lang="json">
"8Gi"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.mediaDir.subPath</td>
			<td>string</td>
			<td><pre lang="json">
"media"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.staticDir.accessModes[0]</td>
			<td>string</td>
			<td><pre lang="json">
"ReadWriteOnce"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.staticDir.annotations</td>
			<td>object</td>
			<td><pre lang="json">
{}
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.staticDir.enabled</td>
			<td>bool</td>
			<td><pre lang="json">
true
</pre>
</td>
			<td>Allow persistence</td>
		</tr>
		<tr>
			<td>persistence.staticDir.existingClaim</td>
			<td>bool</td>
			<td><pre lang="json">
false
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.staticDir.mountPath</td>
			<td>string</td>
			<td><pre lang="json">
"/opt/django/static"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.staticDir.size</td>
			<td>string</td>
			<td><pre lang="json">
"8Gi"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>persistence.staticDir.subPath</td>
			<td>string</td>
			<td><pre lang="json">
"static"
</pre>
</td>
			<td></td>
		</tr>
		<tr>
			<td>postgis.enabled</td>
			<td>bool</td>
			<td><pre lang="json">
true
</pre>
</td>
			<td>Enable postgis as database backend by default. Set to false if using different external backend.</td>
		</tr>
		<tr>
			<td>postgis.existingSecret</td>
			<td>tpl/string</td>
			<td><pre lang="tpl">

postgis.existingSecret: |
{{ include "common.sharedSecretName" . | quote -}}

</pre>
</td>
			<td>Existing secret to be used</td>
		</tr>
		<tr>
			<td>probe</td>
			<td>tpl/object</td>
			<td><pre lang="tpl">

probe: |

</pre>
</td>
			<td>Probe can be overridden</td>
		</tr>
		<tr>
			<td>service.annotations</td>
			<td>dict</td>
			<td><pre lang="json">
{}
</pre>
</td>
			<td>Extra service annotations</td>
		</tr>
		<tr>
			<td>service.clusterIP</td>
			<td>string</td>
			<td><pre lang="json">
""
</pre>
</td>
			<td>Specify `None` for headless service. Otherwise, leave them be.</td>
		</tr>
		<tr>
			<td>service.externalIPs</td>
			<td>tpl/array</td>
			<td><pre lang="tpl">

service.externalIPs: |

</pre>
</td>
			<td>Specify for LoadBalancer service type</td>
		</tr>
		<tr>
			<td>service.nodePort</td>
			<td>int</td>
			<td><pre lang="json">
nil
</pre>
</td>
			<td>Specify node port, for NodePort service type</td>
		</tr>
		<tr>
			<td>service.port</td>
			<td>int</td>
			<td><pre lang="json">
80
</pre>
</td>
			<td>Specify service port</td>
		</tr>
		<tr>
			<td>service.type</td>
			<td>string</td>
			<td><pre lang="json">
"ClusterIP"
</pre>
</td>
			<td>Define k8s service for Django.</td>
		</tr>
	</tbody>
</table>

